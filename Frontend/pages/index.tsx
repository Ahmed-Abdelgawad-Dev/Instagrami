import type { GetServerSideProps, NextPage } from "next";
import Image from "next/image";
import Head from "next/head";
import Header from "../components/Header";
import AfterHeader from "../components/AfterHeader";
import Layout from "../components/Layout";
import { InferGetServerSidePropsType } from "next";

export const getServerSideProps = async () => {
    const res = await fetch(`http://127.0.0.1:8000/posts/`);
    const data = await res.json();
    console.log(data);

    if (!data) {
        return {
            notFound: true,
        };
    }
    return { props: { data } };
};

const Home = ({
    data,
}: // }: InferGetServerSidePropsType<typeof getServerSideProps>) => {
any) => {
    console.log(data);
    return (
        <Layout>
            <div className="min-w-2xl max-w-7xl mx-auto">
                <Head>
                    <title>Mediumize</title>
                    <meta
                        name="description"
                        content="Generated by create next app"
                    />
                    <link rel="icon" href="/favicon.ico" />
                </Head>
                <Header />
                <main>
                    <AfterHeader />
                </main>
                <div>
                    <div>
                        {data.map((item: any) => (
                            <div>
                                <ul>
                                    <li key={item.title}>
                                        {
                                            <figure className="md:flex bg-slate-100 rounded-xl p-8 md:p-0 dark:bg-slate-800">
                                                <Image
                                                    className="w-24 h-24 md:w-48 md:h-auto md:rounded-none rounded-full mx-auto"
                                                    src={
                                                        item.img
                                                            ? item.img
                                                            : null
                                                    }
                                                    alt="pic"
                                                    width="384"
                                                    height="512"
                                                />

                                                {/* <Image className="w-24 h-24 md:w-48 md:h-auto md:rounded-none rounded-full mx-auto" src="" alt="" width="384" height="512"> */}
                                                <div className="pt-6 md:p-8 text-center md:text-left space-y-4">
                                                    <blockquote>
                                                        <p className="text-lg font-medium">
                                                            “Tailwind CSS is the
                                                            only framework that
                                                            I've seen scale on
                                                            large teams. It’s
                                                            easy to customize,
                                                            adapts to any
                                                            design, and the
                                                            build size is tiny.”
                                                        </p>
                                                    </blockquote>
                                                    <figcaption className="font-medium">
                                                        <div className="text-sky-500 dark:text-sky-400">
                                                            {item.author}
                                                        </div>
                                                        <div className="text-slate-700 dark:text-slate-500">
                                                            Staff Engineer,
                                                            Algolia
                                                        </div>
                                                    </figcaption>
                                                </div>
                                            </figure>
                                        }
                                    </li>
                                </ul>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </Layout>
    );
};

export default Home;
